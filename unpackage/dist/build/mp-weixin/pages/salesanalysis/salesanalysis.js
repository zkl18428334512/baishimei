(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/salesanalysis/salesanalysis"],{"0014":function(e,a,t){"use strict";var s=t("9368"),n=t.n(s);n.a},"05d6":function(e,a,t){"use strict";t.r(a);var s=t("d9e9"),n=t.n(s);for(var o in s)"default"!==o&&function(e){t.d(a,e,function(){return s[e]})}(o);a["default"]=n.a},2734:function(e,a,t){"use strict";var s=function(){var e=this,a=e.$createElement;e._self._c},n=[];t.d(a,"a",function(){return s}),t.d(a,"b",function(){return n})},"6ea8":function(e,a,t){"use strict";t.r(a);var s=t("2734"),n=t("05d6");for(var o in n)"default"!==o&&function(e){t.d(a,e,function(){return n[e]})}(o);t("0014");var i=t("2877"),r=Object(i["a"])(n["default"],s["a"],s["b"],!1,null,null,null);a["default"]=r.exports},9368:function(e,a,t){},d9e9:function(e,a,t){"use strict";(function(e){Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var s=t("2f62"),n=l(t("e463")),o=t("907c"),i=t("b788"),r=t("7545");function l(e){return e&&e.__esModule?e:{default:e}}var c,u=function(){return t.e("components/cmd-icon/cmd-icon").then(t.bind(null,"ac07"))},d=function(){return t.e("components/tki-tree/tki-tree").then(t.bind(null,"63c2"))},h=function(){return t.e("components/yang-paging/fy").then(t.bind(null,"f8ac"))},g=function(){return Promise.all([t.e("common/vendor"),t.e("components/date-picker/date-picker2")]).then(t.bind(null,"8fc4"))},p=null,m={components:{calendar:g,paging:h,tkiTree:d,cmdIcon:u},data:function(){return{total:[1],pageSize:5,page:[],current:1,zpage:0,testList:[{id:2,name:"客户",children:[{id:21,name:"石家庄市",value:12545},{id:22,name:"唐山市",value:51545},{id:23,name:"秦皇岛市"}]},{id:3,name:"产品",children:[{id:31,name:"济南市",children:[{id:311,name:"历下区"},{id:312,name:"槐荫区"},{id:313,name:"天桥区"},{id:314,name:"历城区"},{id:315,name:"长清区"}]},{id:32,name:"青岛市"},{id:33,name:"临沂市",children:[{id:331,name:"兰山区",children:[{id:3331,name:"金雀山街道"}]},{id:332,name:"河东区"},{id:333,name:"罗庄区",children:[{id:3331,name:"盛庄街道"}]}]},{id:34,name:"日照市"},{id:35,name:"淄博市"},{id:43,name:"滨州市"},{id:44,name:"菏泽市"}]}],list:[],multiple:!0,selectParent:!1,beginDate:"2019-05-06",endDate:"2019-05-07",showCaledar:!1,dateStr:"",daysCount:365,singleDate:!0,res1:[],e:"",tableData:{categories:["19","20","21","22","23","24"],series:[{name:"毛利",data:[15,20,45,37,43,34]},{name:"销售额",data:[30,35,25,14,34,18]}]},PsearchData:[],SsearchData:[],SsearchData1:[],searchvalue:[],searchvalues:[],systemDate1:"",systemDate:"",arr10:["全部商品"],inputsArray:[{type:"picker-custom",itemArray:[[{name:"a",value:"a"},{name:"b",value:"b"},{name:"c",value:"c"}]],defaultValue:[0,0],onceShowDefaultValue:!0,steps:{steps_1_value:"name"}}],inputsArray1:[{border_top:"1px solid #f2f2f2",type:"picker-custom2",title:"",itemObject:{step_1:[{name:"蔬菜"},{name:"荤菜"},{name:"全部商品"}],step_2:[["青菜","白菜"],["猪肉","牛肉"],["",""]]},steps:{step_1_value:"name",step_2_value:"",step_3_value:""},defaultValue:[1,0],onceShowDefaultValue:!0,linkageNum:2,linkage:!0}],cWidth:"",cHeight:"",pixelRatio:1,serverData:"",title:"销售分析",content:"1111"}},created:function(){this.productPage()},computed:(0,s.mapState)(["userInfo","userToken"]),onLoad:function(a){c=this,this.title=a.name,this.content=a.id,this.addDate(),this.addDate1(),this.onloadsalep(),e.getSystemInfo({success:function(e){e.pixelRatio>1&&(c.pixelRatio=2)}}),this.cWidth=e.upx2px(750),this.cHeight=e.upx2px(500),this.getServerData()},onBackPress:function(){if(!1!==this.showCaledar)return this.showCaledar=!1,!0},methods:{productPage:function(){var e=this,a=parseInt(e.total),t=parseInt(e.pageSize),s=parseInt(a/t);a/t>s&&s++,e.zpage=s;var n=[];if(s<5)for(var o=1;o<=s;o++)n.push(o);else n=[1,2,3,4,5];e.page=n,console.log(e.page+"1111111111111111111")},getServerData:function(){(0,r.FlipInstantaneousLoadingSalesData)({"access-token":this.userToken,beginDate:this.systemDate,endDate:this.systemDate1}).then(function(e){console.log(e.data),c.serverData=e.data.data;for(var a={categories:[],series:[{name:"销售量",data:[]},{name:"毛利",data:[]}]},t=0;t<e.data.length;t++)a.categories.push(e.data[t].date.substring(8,10)),a.series[0].data.push(e.data[t].totalSalesPrice),a.series[1].data.push(e.data[t].grossProfitPrice);c.showColumn("canvasColumn",a)})},showColumn:function(e,a){p=new n.default({$this:c,canvasId:e,type:"column",legend:!0,fontSize:11,background:"#FFFFFF",pixelRatio:c.pixelRatio,animation:!0,categories:a.categories,series:a.series,xAxis:{disableGrid:!0},yAxis:{},dataLabel:!0,width:c.cWidth*c.pixelRatio,height:c.cHeight*c.pixelRatio,extra:{column:{width:c.cWidth*c.pixelRatio*.45/a.categories.length}}})},changeData:function(){p.updateData({series:c.serverData.ColumnB.series,categories:c.serverData.ColumnB.categories})},addDate:function(){var e=new Date;this.systemDate=(0,o.parseTime)(e,"{y}-{m}-{d}")},addDate1:function(){var e=new Date;this.systemDate1=(0,i.parseTime1)(e,"{y}-{m}-{d}")},ChangeDate:function(e){var a=new Date(e);this.systemDate1=(0,i.parseTime1)(a,"{y}-{m}-{d}")},onloadsalep:function(){var e=this;(0,r.Loadingcustomerinformation)({"access-token":this.userToken}).then(function(e){console.log(e.data);for(var a=[],t=0;t<e.data.length;t++){var s={id:"2"+t,name:e.data[t].buyerOrgName,value:e.data[t].buyerOrgId};a.push(s),c.SsearchData.push(e.data[t].buyerOrgId)}c.testList[0].children=[],c.testList[0].children=a}),(0,r.Loadingcommodityinformation)({"access-token":this.userToken}).then(function(a){console.log(a.data),console.log(c.testList[1].children),c.testList[1].children=[];for(var t=0;t<a.data.length;t++){var s={id:"3"+t,name:a.data[t].name,children:[]};if(null==a.data[t].childProductTypeList)c.testList[1].children.push(s);else{for(var n=0;n<a.data[t].childProductTypeList.length;n++){var o={id:"3"+t+n,name:a.data[t].childProductTypeList[n].name,value:a.data[t].childProductTypeList[n].productTypeId};s.children.push(o),c.searchvalue.push(a.data[t].childProductTypeList[n].productTypeId)}c.testList[1].children.push(s)}}console.log(c.SsearchData),console.log(c.searchvalue),setTimeout(function(){e.list=c.testList},300)})},unique:function(e){var a=new Map;return e.filter(function(e){return!a.has(e.id)&&a.set(e.id,1)})},change:function(e){var a=this,t=e.choiceDate,s=e.dayCount;this.systemDate="",this.systemDate1="",console.log(t,s),console.log("入住从 "+t[0].re+"  到 "+t[1].re+"  共 "+s+" 晚"),this.systemDate=t[0].date.substring(0,4)+"-"+t[0].date.substring(4,6)+"-"+t[0].date.substring(6,8),this.systemDate1=t[1].date.substring(0,4)+"-"+t[1].date.substring(4,6)+"-"+t[1].date.substring(6,8),console.log(this.systemDate),console.log(this.systemDate1),(0,r.FlipInstantaneousLoadingSalesData)({"access-token":this.userToken,beginDate:this.systemDate,endDate:this.systemDate1,buyerOrgIdList:c.SsearchData1.join(","),productTypeIdList:c.searchvalues.join(",")}).then(function(e){console.log(e.data),c.res1=[],a.total=[],a.total.push(e.data.length),console.log(a.total[0]),a.productPage();var t=a.splitarray(e.data,5);if(console.log(t),e.data.length<5)c.res1=e.data;else for(var s=0;s<e.data.length;s++)s<5&&c.res1.push(e.data[s]);console.log(c.res1);for(var n={categories:[],series:[{name:"销售量",data:[]},{name:"毛利",data:[]}]},o=0;o<c.res1.length;o++)n.categories.push(c.res1[o].date.substring(8,10)),n.series[0].data.push(c.res1[o].totalSalesPrice),n.series[1].data.push(c.res1[o].grossProfitPrice);c.showColumn("canvasColumn",n)})},qy:function(e){var a=this;console.log(e),console.log(this.systemDate),console.log(this.systemDate1),(0,r.CustomerDataChangeDataAnalysis)({"access-token":this.userToken,beginDate:this.systemDate,endDate:this.systemDate1,buyerOrgIdList:c.SsearchData1.join(","),productTypeIdList:c.searchvalues.join(",")}).then(function(t){console.log(t.data),c.res1=[],a.total=[],a.total.push(t.data.length),console.log(a.total[0]);var s=a.splitarray(t.data,5);console.log(s),c.res1=s[e-1],console.log(c.res1);for(var n={categories:[],series:[{name:"销售量",data:[]},{name:"毛利",data:[]}]},o=0;o<c.res1.length;o++)n.categories.push(c.res1[o].date.substring(8,10)),n.series[0].data.push(c.res1[o].totalSalesPrice),n.series[1].data.push(c.res1[o].grossProfitPrice);c.showColumn("canvasColumn",n)});var t=this;t.current=e;var s=parseInt(t.total),n=parseInt(t.pageSize),o=parseInt(s/n);s/n>o&&o++;var i=[];if(!(o<5))return e>=o-2?(i=[o-4,o-3,o-2,o-1,o],t.page=i,void console.log(t.page+"2222222222222")):o>5&&e<4?(i=[1,2,3,4,5],t.page=i,void console.log(t.page+"333333333333")):o>5&&e>3?(i=[e-2,e-1,e,e+1,e+2],t.page=i,void console.log(t.page+"444444444444444444")):void 0},treeConfirm:function(e){var a=this;console.log(e),c.searchvalues=[],c.SsearchData1=[],console.log(c.SsearchData),console.log(c.searchvalue);for(var t=0;t<c.searchvalue.length;t++)for(var s=0;s<e.length;s++)e[s].value==c.searchvalue[t]&&c.searchvalues.push(e[s].value);for(var n=0;n<c.SsearchData.length;n++)for(var o=0;o<e.length;o++)e[o].value==c.SsearchData[n]&&c.SsearchData1.push(e[o].value);console.log(c.SsearchData1),console.log(c.searchvalues),c.res1=[],(0,r.CustomerDataChangeDataAnalysis)({"access-token":this.userToken,beginDate:this.systemDate,endDate:this.systemDate1,buyerOrgIdList:c.SsearchData1.join(","),productTypeIdList:c.searchvalues.join(",")}).then(function(e){console.log(e.data),c.res1=[],a.total=[],a.total.push(e.data.length),console.log(a.total[0]),a.productPage();var t=a.splitarray(e.data,5);if(console.log(t),e.data.length<5)c.res1=e.data;else for(var s=0;s<e.data.length;s++)s<5&&c.res1.push(e.data[s]);console.log(c.res1);for(var n={categories:[],series:[{name:"销售量",data:[]},{name:"毛利",data:[]}]},o=0;o<c.res1.length;o++)n.categories.push(c.res1[o].date.substring(8,10)),n.series[0].data.push(c.res1[o].totalSalesPrice),n.series[1].data.push(c.res1[o].grossProfitPrice);c.showColumn("canvasColumn",n)})},treeCancel:function(e){console.log(e)},showTree:function(){this.$refs.tkitree._show()},splitarray:function(e,a){for(var t=e.length,s=[],n=0;n<t;n+=a)s.push(e.slice(n,n+a));return s}}};a.default=m}).call(this,t("543d")["default"])}},[["cc01","common/runtime","common/vendor"]]]);