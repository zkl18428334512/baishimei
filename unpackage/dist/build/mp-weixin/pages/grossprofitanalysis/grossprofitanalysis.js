(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/grossprofitanalysis/grossprofitanalysis"],{"15cd":function(e,t,a){"use strict";var s=a("fe14"),o=a.n(s);o.a},3998:function(e,t,a){"use strict";var s=function(){var e=this,t=e.$createElement;e._self._c},o=[];a.d(t,"a",function(){return s}),a.d(t,"b",function(){return o})},"62ba":function(e,t,a){"use strict";a.r(t);var s=a("7c2f"),o=a.n(s);for(var n in s)"default"!==n&&function(e){a.d(t,e,function(){return s[e]})}(n);t["default"]=o.a},"72b7":function(e,t,a){"use strict";a.r(t);var s=a("3998"),o=a("62ba");for(var n in o)"default"!==n&&function(e){a.d(t,e,function(){return o[e]})}(n);a("15cd");var r=a("2877"),i=Object(r["a"])(o["default"],s["a"],s["b"],!1,null,null,null);t["default"]=i.exports},"7c2f":function(e,t,a){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=c(a("e463")),o=a("2f62"),n=a("907c"),r=a("b788"),i=a("7545");function c(e){return e&&e.__esModule?e:{default:e}}var l,u=function(){return a.e("components/cmd-icon/cmd-icon").then(a.bind(null,"ac07"))},h=function(){return a.e("components/kilvn-fa-icon/fa-icon").then(a.bind(null,"0bb4"))},d=function(){return a.e("components/tki-tree/tki-tree").then(a.bind(null,"63c2"))},g=function(){return Promise.all([a.e("common/vendor"),a.e("components/date-picker/date-picker2")]).then(a.bind(null,"8fc4"))},p=null,f={components:{calendar:g,tkiTree:d,faIcon:h,cmdIcon:u},data:function(){return{total:[2],pageSize:5,page:[],current:1,zpage:0,res1:[],testList:[{id:2,name:"客户"},{id:1,name:"商品"}],list:[],multiple:!1,selectParent:!1,beginDate:"2019-05-06",endDate:"2019-05-07",showCaledar:!1,dateStr:"",daysCount:365,singleDate:!0,tableData:{categories:["蛋类","肉类","蔬菜","水果","粗粮","加工"],series:[{name:"销售量",data:[40,35,30,25,20,15]}]},tableData1:{categories:["六幼儿园","七幼儿园","机关幼儿园"],series:[{name:"毛利率",data:[40,35,30]}]},PsearchData:[],SsearchData:[],systemDate1:"",systemDate:"",searchType:[2],inputsArray:[{title:"分析类别",type:"radio",itemArray:[{name:"客户",value:"客户",defaultValue:!0},{name:"商品",value:"商品"}],color:"#c0ebd7",scale:".8"}],cWidth:"",cHeight:"",pixelRatio:1,serverData:"",title:"销售分析",content1:"1111",isShowSelect:!1}},computed:(0,o.mapState)(["userInfo","userToken"]),onLoad:function(t){var a=this;l=this,this.title=t.name,this.addDate(),this.addDate1(),setTimeout(function(){a.list=a.testList},300),e.getSystemInfo({success:function(e){e.pixelRatio>1&&(l.pixelRatio=2)}}),this.cWidth=e.upx2px(750),this.cHeight=e.upx2px(500),this.getServerData()},onBackPress:function(){if(!1!==this.showCaledar)return this.showCaledar=!1,!0},created:function(){this.productPage()},methods:{productPage:function(){var e=this,t=parseInt(e.total),a=parseInt(e.pageSize),s=parseInt(t/a);t/a>s&&s++,e.zpage=s;var o=[];if(s<5)for(var n=1;n<=s;n++)o.push(n);else o=[1,2,3,4,5];e.page=o,console.log(e.page+"1111111111111111111")},arrowDown:function(){this.isShowSelect=!this.isShowSelect},select:function(e,t){this.isShowSelect=!1,this.unitName=e.value},getServerData:function(){var e=this;console.log(this.systemDate),console.log(this.systemDate1),(0,i.Grossprofitanalysisdata)({"access-token":this.userToken,beginDate:this.systemDate,endDate:this.systemDate1,searchType:this.searchType[0]}).then(function(t){console.log(t.data),l.res1=[],e.total=[],e.total.push(t.data.length),console.log(e.total[0]),e.productPage();var a=e.splitarray(t.data,5);if(console.log(a),t.data.length<5)l.res1=t.data;else for(var s=0;s<t.data.length;s++)s<5&&l.res1.push(t.data[s]);for(var o={categories:[],series:[{name:"毛利率",data:[]}]},n=0;n<l.res1.length;n++)o.categories.push(l.res1[n].buyerOrgName),o.series[0].data.push(l.res1[n].grossProfitRate);l.showColumn("canvasColumn",o)})},getServerData1:function(){var e=this;(0,i.Grossprofitanalysisdata)({"access-token":this.userToken,beginDate:this.systemDate,endDate:this.systemDate1,searchType:this.searchType[0]}).then(function(t){console.log(t.data);var a=t.data,s=a.sort(l.compare("grossProfitRate"));console.log(t.data),l.res1=[],e.total=[],e.total.push(s.length),console.log(e.total[0]),e.productPage();var o=e.splitarray(s,5);if(console.log(o),s.length<5)l.res1=s;else for(var n=0;n<s.length;n++)n<5&&l.res1.push(s[n]);for(var r={categories:[],series:[{name:"毛利率",data:[]}]},i=0;i<l.res1.length;i++)r.categories.push(l.res1[i].productName),r.series[0].data.push(l.res1[i].grossProfitRate);l.showColumn("canvasColumn",r)})},showColumn:function(e,t){p=new s.default({$this:l,canvasId:e,type:"column",legend:!0,fontSize:11,background:"#FFFFFF",pixelRatio:l.pixelRatio,animation:!0,categories:t.categories,series:t.series,xAxis:{disableGrid:!0},yAxis:{},dataLabel:!0,width:l.cWidth*l.pixelRatio,height:l.cHeight*l.pixelRatio,extra:{column:{width:l.cWidth*l.pixelRatio*.45/t.categories.length}}})},changeData:function(){p.updateData({series:l.serverData.ColumnB.series,categories:l.serverData.ColumnB.categories})},addDate:function(){var e=new Date;console.log(e),this.systemDate=(0,n.parseTime)(e,"{y}-{m}-{d}"),console.log(this.systemDate+"截止时间")},addDate1:function(){var e=new Date;this.systemDate1=(0,r.parseTime1)(e,"{y}-{m}-{d}"),console.log(this.systemDate1+"开始时间")},ChangeDate:function(e){var t=new Date(e);this.systemDate=(0,n.parseTime)(t,"{y}-{m}-{d}")},ChangeDate1:function(e){console.log(e+"截止日期");var t=new Date(e);this.systemDate1=(0,n.parseTime)(t,"{y}-{m}-{d}")},compare:function(e){return function(t,a){var s=t[e],o=a[e];return s<o?1:s>o?-1:0}},toPercent:function(e){var t=Number(100*e).toFixed(1);return t+="%",t},change:function(e){var t=this,a=e.choiceDate,s=e.dayCount;this.systemDate="",this.systemDate1="",console.log(a,s),console.log("入住从 "+a[0].re+"  到 "+a[1].re+"  共 "+s+" 晚"),this.systemDate=a[0].date.substring(0,4)+"-"+a[0].date.substring(4,6)+"-"+a[0].date.substring(6,8),this.systemDate1=a[1].date.substring(0,4)+"-"+a[1].date.substring(4,6)+"-"+a[1].date.substring(6,8),console.log(this.systemDate),console.log(this.systemDate1),(0,i.Grossprofitanalysisdata)({"access-token":this.userToken,beginDate:this.systemDate,endDate:this.systemDate1,searchType:this.searchType[0]}).then(function(e){console.log(e.data),l.res1=[],t.total=[],t.total.push(e.data.length),console.log(t.total[0]),t.productPage();var a=t.splitarray(e.data,5);if(console.log(a),e.data.length<5)l.res1=e.data;else for(var s=0;s<e.data.length;s++)s<5&&l.res1.push(e.data[s]);for(var o={categories:[],series:[{name:"毛利率",data:[]}]},n=0;n<l.res1.length;n++)o.categories.push(l.res1[n].buyerOrgName),o.series[0].data.push(l.res1[n].grossProfitRate);l.showColumn("canvasColumn",o)})},treeConfirm:function(e){console.log(e),2==e[0].id?(this.searchType=[],this.searchType.push(2),console.log(this.searchType[0]),this.getServerData()):(this.searchType=[],this.searchType.push(1),console.log(this.searchType[0]),this.getServerData1())},treeCancel:function(e){console.log(e)},showTree:function(){this.$refs.tkitree._show()},qy:function(e){var t=this,a=this;a.current=e,console.log(e),2==this.searchType?(0,i.Grossprofitanalysisdata)({"access-token":this.userToken,beginDate:this.systemDate,endDate:this.systemDate1,searchType:this.searchType[0]}).then(function(a){console.log(a.data),l.res1=[],t.total=[],t.total.push(a.data.length),console.log(t.total[0]);var s=t.splitarray(a.data,5);console.log(s),l.res1=s[e-1],console.log(l.res1);for(var o={categories:[],series:[{name:"毛利率",data:[]}]},n=0;n<l.res1.length;n++)o.categories.push(l.res1[n].buyerOrgName),o.series[0].data.push(l.res1[n].grossProfitRate);l.showColumn("canvasColumn",o)}):(0,i.Grossprofitanalysisdata)({"access-token":this.userToken,beginDate:this.systemDate,endDate:this.systemDate1,searchType:this.searchType[0]}).then(function(a){console.log(a.data);var s=a.data,o=s.sort(l.compare("grossProfitRate"));l.res1=[],t.total=[],t.total.push(a.data.length),console.log(t.total[0]);var n=t.splitarray(o,5);console.log(n),l.res1=n[e-1],console.log(l.res1);for(var r={categories:[],series:[{name:"毛利率",data:[]}]},i=0;i<l.res1.length;i++)r.categories.push(l.res1[i].productName),r.series[0].data.push(l.res1[i].grossProfitRate);l.showColumn("canvasColumn",r)});var s=parseInt(a.total),o=parseInt(a.pageSize),n=parseInt(s/o);s/o>n&&n++;var r=[];if(!(n<5))return e>=n-2?(r=[n-4,n-3,n-2,n-1,n],a.page=r,void console.log(a.page+"2222222222222")):n>5&&e<4?(r=[1,2,3,4,5],a.page=r,void console.log(a.page+"333333333333")):n>5&&e>3?(r=[e-2,e-1,e,e+1,e+2],a.page=r,void console.log(a.page+"444444444444444444")):void 0},splitarray:function(e,t){for(var a=e.length,s=[],o=0;o<a;o+=t)s.push(e.slice(o,o+t));return s}}};t.default=f}).call(this,a("543d")["default"])},fe14:function(e,t,a){}},[["f759","common/runtime","common/vendor"]]]);