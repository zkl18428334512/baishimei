(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/main/main"],{"0e5d":function(n,e,o){"use strict";(function(n){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=o("ae20"),a=o("6ccc"),i=o("2f62");function r(n){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{},t=Object.keys(o);"function"===typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(o).filter(function(n){return Object.getOwnPropertyDescriptor(o,n).enumerable}))),t.forEach(function(e){c(n,e,o[e])})}return n}function c(n,e,o){return e in n?Object.defineProperty(n,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[e]=o,n}var u={data:function(){return{gridCol:3,gridBorder:!1,loadModal:!1,cuIconList:[{cuIcon:"deliver",color:"red",badge:0,name:"配送",path:"/pages/deliver/deliver",permission:["admin","app:manage:delivery"],hidden:!0},{cuIcon:"goodsnew",color:"orange",badge:0,name:"采购",path:"/pages/purchase/purchase",permission:["admin","app:manage:purchase"],hidden:!0},{cuIcon:"squarecheck",color:"yellow",badge:0,name:"收货",path:"/pages/inspect/inspect",permission:["admin","app:manage:inspect"],hidden:!0},{cuIcon:"edit",color:"yellow",badge:0,name:"销售单",path:"/pages/sales/sales",permission:["admin","app:manage:sales"],hidden:!0},{cuIcon:"squarecheck",color:"yellow",badge:0,name:"报表",path:"/pages/report/report",permission:["admin","app:manage:inspect"],hidden:!0}]}},computed:(0,i.mapState)(["hasLogin","userInfo","permissionList","isLoading","userToken"]),watch:{hasLogin:function(n,e){!0===n&&(this.loadModal=!1)},isLoading:function(n,e){!1===n&&this.loadData()}},onLoad:function(){this.hasLogin?this.loadData():this.isLoading?this.loadModal=!0:this.backToLogin(),console.log(this.userInfo),console.log(this.userToken)},methods:r({},(0,i.mapMutations)(["logout"]),{loadData:function(){var n=this,e=this.permissionList;this.cuIconList.forEach(function(o){n.hasPermission(e,o.permission)&&(o.hidden=!1,"deliver"===o.cuIcon&&n.getPendingDeliveryOrderCount(o),"goodsnew"===o.cuIcon&&n.getPendingPriceOrderCount(o),"edit"===o.cuIcon&&n.getPendingSalesOrderCount(o))})},backToLogin:function(){n.reLaunch({url:"../login/login"})},handleTap:function(e){console.log(e),n.navigateTo({url:e})},getPendingDeliveryOrderCount:function(n){(0,t.countPendingDelivery)().then(function(e){n.badge=e.data}).catch(function(n){console.log("error!",n)})},getPendingPriceOrderCount:function(n){(0,a.countPendingPriceOrder)().then(function(e){n.badge=e.data}).catch(function(n){console.log("error!",n)})},getPendingSalesOrderCount:function(n){(0,a.countPendingSalesOrder)().then(function(e){n.badge=e.data}).catch(function(n){console.log("error!",n)})},hasPermission:function(n,e){return n.some(function(n){return e.includes(n)})}})};e.default=u}).call(this,o("543d")["default"])},"6b79":function(n,e,o){"use strict";o.r(e);var t=o("0e5d"),a=o.n(t);for(var i in t)"default"!==i&&function(n){o.d(e,n,function(){return t[n]})}(i);e["default"]=a.a},b1da:function(n,e,o){"use strict";var t=function(){var n=this,e=n.$createElement;n._self._c},a=[];o.d(e,"a",function(){return t}),o.d(e,"b",function(){return a})},ddd2:function(n,e,o){"use strict";o.r(e);var t=o("b1da"),a=o("6b79");for(var i in a)"default"!==i&&function(n){o.d(e,n,function(){return a[n]})}(i);var r=o("2877"),c=Object(r["a"])(a["default"],t["a"],t["b"],!1,null,null,null);e["default"]=c.exports}},[["7753","common/runtime","common/vendor"]]]);