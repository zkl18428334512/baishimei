(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/deliver/deliver"],{5400:function(t,e,r){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=r("ae20"),n=r("907c");function o(t){return l(t)||s(t)||a()}function a(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function s(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}function l(t){if(Array.isArray(t)){for(var e=0,r=new Array(t.length);e<t.length;e++)r[e]=t[e];return r}}var u={filters:{statusNameFilter:function(t){var e={0:"未装车",15:"配送中",20:"完成"};return e[t]||"未装车"},statusClassFilter:function(t){var e={0:"bg-orange",15:"bg-green",20:"bg-grey"};return e[t]||"bg-orange"}},data:function(){return{listQuery:{pageNo:1,pageSize:5},list:[],loadOver:!1}},onLoad:function(t){this.getList(!1)},onShow:function(e){var r=t.getStorageSync("up_delivery_order");r&&(this.list.forEach(function(t){if(t.list){var e=t.list.find(function(t){return t.deliveryOrderId===r.deliveryOrderId});e&&(e.status=r.status)}}),t.removeStorageSync("up_delivery_order"))},onPullDownRefresh:function(){this.listQuery.pageNo=1,this.loadOver=!1,this.getList(!1,function(){return setTimeout(function(){t.stopPullDownRefresh()},1e3)})},onReachBottom:function(){console.log("no:"+this.listQuery.pageNo),this.loadOver||(this.listQuery.pageNo=this.listQuery.pageNo+1,this.getList(!0))},methods:{getList:function(t,e){var r=this;(0,i.fetchPendingDelivery)(this.listQuery).then(function(i){var n=o(i.data.list||[]);n.length<=0?r.loadOver=!0:r.loadOver=!1,r.setData(n,t),e&&e()}).catch(function(t){console.log("error!",t)})},setData:function(t,e){var r=this;e||(this.list=[]),t.forEach(function(t,e){for(var i=(0,n.parseTime)(t.deliveryTime,"{y}-{m}-{d}"),o=!1,a=0;a<r.list.length;a++)r.list[a].deliverDate===i&&(r.list[a].list.push(t),o=!0);o||r.list.push({deliverDate:i,list:[t]})})},handleTap:function(e){t.navigateTo({url:"/pages/deliveritem/deliveritem?orderId="+e})}}};e.default=u}).call(this,r("543d")["default"])},bab5:function(t,e,r){"use strict";r.r(e);var i=r("5400"),n=r.n(i);for(var o in i)"default"!==o&&function(t){r.d(e,t,function(){return i[t]})}(o);e["default"]=n.a},e264:function(t,e,r){"use strict";r.r(e);var i=r("ef14"),n=r("bab5");for(var o in n)"default"!==o&&function(t){r.d(e,t,function(){return n[t]})}(o);var a=r("2877"),s=Object(a["a"])(n["default"],i["a"],i["b"],!1,null,null,null);e["default"]=s.exports},ef14:function(t,e,r){"use strict";var i=function(){var t=this,e=t.$createElement,r=(t._self._c,t.__map(t.list,function(e,r){var i=t._f("parseTime")(e.deliverDate,"{m}-{d}"),n=t.__map(e.list,function(e,r){var i=t._f("parseTime")(e.deliveryTime,"{a}"),n=t._f("parseTime")(e.deliveryTime,"{h}:{i}"),o=t._f("statusNameFilter")(e.status);return{$orig:t.__get_orig(e),f1:i,f2:n,f3:o}});return{$orig:t.__get_orig(e),f0:i,l0:n}}));t.$mp.data=Object.assign({},{$root:{l1:r}})},n=[];r.d(e,"a",function(){return i}),r.d(e,"b",function(){return n})}},[["3b6e","common/runtime","common/vendor"]]]);