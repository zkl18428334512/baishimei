(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/salesanalysis/salesanalysis"],{"0917":function(a,s,e){"use strict";var t=e("aee7"),n=e.n(t);n.a},"2a59":function(a,s,e){"use strict";var t=function(){var a=this,s=a.$createElement;a._self._c},n=[];e.d(s,"a",function(){return t}),e.d(s,"b",function(){return n})},"87b3":function(a,s,e){"use strict";(function(a){e("f263"),e("921b");t(e("66fd"));var s=t(e("c061"));function t(a){return a&&a.__esModule?a:{default:a}}a(s.default)}).call(this,e("6e42")["createPage"])},aee7:function(a,s,e){},c061:function(a,s,e){"use strict";e.r(s);var t=e("2a59"),n=e("ed97");for(var l in n)"default"!==l&&function(a){e.d(s,a,function(){return n[a]})}(l);e("0917");var i=e("2877"),o=Object(i["a"])(n["default"],t["a"],t["b"],!1,null,null,null);s["default"]=o.exports},c864:function(a,s,e){"use strict";(function(a,t){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var n=e("2f62"),l=u(e("de9a")),i=e("a627"),o=e("9357"),r=e("39ac");function u(a){return a&&a.__esModule?a:{default:a}}var c,d=function(){return e.e("components/cmd-icon/cmd-icon").then(e.bind(null,"6604"))},h=function(){return e.e("components/tki-tree/tki-tree").then(e.bind(null,"3c2c"))},g=function(){return e.e("components/yang-paging/fy").then(e.bind(null,"5b6b"))},p=function(){return Promise.all([e.e("common/vendor"),e.e("components/date-picker/date-picker2")]).then(e.bind(null,"5303"))},y=null,v={components:{calendar:p,paging:g,tkiTree:h,cmdIcon:d},data:function(){return{total:[1],pageSize:5,page:[],current:1,zpage:0,testList:[{id:2,name:"客户",children:[]},{id:3,name:"产品",children:[]}],list:[],multiple:!0,selectParent:!0,beginDate:"2019-05-06",endDate:"2019-05-07",showCaledar:!1,dateStr:"",daysCount:366,singleDate:!0,res1:[],e:"",tableData:{},PsearchData:[],SsearchData:[],SsearchData1:[],searchvalue:[],searchvalues:[],systemDate1:"",systemDate:"",arr10:["全部商品"],inputsArray:[{type:"picker-custom",itemArray:[],defaultValue:[0,0],onceShowDefaultValue:!0,steps:{steps_1_value:"name"}}],inputsArray1:[{border_top:"1px solid #f2f2f2",type:"picker-custom2",title:"",itemObject:{step_1:[],step_2:[]},steps:{step_1_value:"name",step_2_value:"",step_3_value:""},defaultValue:[1,0],onceShowDefaultValue:!0,linkageNum:2,linkage:!0}],cWidth:"",cHeight:"",pixelRatio:1,serverData:"",title:"销售分析",content:"1111"}},created:function(){this.productPage()},computed:(0,n.mapState)(["userInfo","userToken"]),onLoad:function(s){c=this,this.title=s.name,this.content=s.id,this.addDate(),this.addDate1(),this.onloadsalep(),a.getSystemInfo({success:function(a){a.pixelRatio>1&&(c.pixelRatio=2)}}),this.cWidth=a.upx2px(750),this.cHeight=a.upx2px(500),this.getServerData()},onBackPress:function(){if(!1!==this.showCaledar)return this.showCaledar=!1,!0},methods:{productPage:function(){var a=this,s=parseInt(a.total),e=parseInt(a.pageSize),t=parseInt(s/e);s/e>t&&t++,a.zpage=t;var n=[];if(t<5)for(var l=1;l<=t;l++)n.push(l);else n=[1,2,3,4,5];a.page=n},getServerData:function(){(0,r.FlipInstantaneousLoadingSalesData)({"access-token":this.userToken,beginDate:this.systemDate,endDate:this.systemDate1}).then(function(a){console.log(t(a.data," at pages\\salesanalysis\\salesanalysis.vue:191")),c.serverData=a.data.data;for(var s={categories:[],series:[{name:"销售量",data:[]},{name:"毛利",data:[]}]},e=0;e<a.data.length;e++)s.categories.push(a.data[e].date.substring(8,10)),s.series[0].data.push(a.data[e].totalSalesPrice),s.series[1].data.push(a.data[e].grossProfitPrice);c.showColumn("canvasColumn",s)})},showColumn:function(a,s){y=new l.default({$this:c,canvasId:a,type:"column",legend:!0,fontSize:11,background:"#FFFFFF",pixelRatio:c.pixelRatio,animation:!0,categories:s.categories,series:s.series,xAxis:{disableGrid:!0},yAxis:{},dataLabel:!0,width:c.cWidth*c.pixelRatio,height:c.cHeight*c.pixelRatio,extra:{column:{width:c.cWidth*c.pixelRatio*.45/s.categories.length}}})},changeData:function(){y.updateData({series:c.serverData.ColumnB.series,categories:c.serverData.ColumnB.categories})},addDate:function(){var a=new Date;this.systemDate=(0,i.parseTime)(a,"{y}-{m}-{d}")},addDate1:function(){var a=new Date;this.systemDate1=(0,o.parseTime1)(a,"{y}-{m}-{d}")},ChangeDate:function(a){var s=new Date(a);this.systemDate1=(0,o.parseTime1)(s,"{y}-{m}-{d}")},onloadsalep:function(){var a=this;(0,r.Loadingcustomerinformation)({"access-token":this.userToken}).then(function(a){console.log(t(a.data," at pages\\salesanalysis\\salesanalysis.vue:257"));for(var s=[],e=0;e<a.data.length;e++){var n={id:"2"+e,name:a.data[e].buyerOrgName,value:a.data[e].buyerOrgId};s.push(n),c.SsearchData.push(a.data[e].buyerOrgId)}c.testList[0].children=[],c.testList[0].children=s}),(0,r.Loadingcommodityinformation)({"access-token":this.userToken}).then(function(s){console.log(t(s.data," at pages\\salesanalysis\\salesanalysis.vue:273")),console.log(t(c.testList[1].children," at pages\\salesanalysis\\salesanalysis.vue:274")),c.testList[1].children=[];for(var e=0;e<s.data.length;e++){var n={id:"3"+e,name:s.data[e].name,children:[],value:s.data[e].productTypeId};if(c.searchvalue.push(s.data[e].productTypeId),null==s.data[e].childProductTypeList)c.testList[1].children.push(n);else{for(var l=0;l<s.data[e].childProductTypeList.length;l++){var i={id:"3"+e+l,name:s.data[e].childProductTypeList[l].name,value:s.data[e].childProductTypeList[l].productTypeId};n.children.push(i),c.searchvalue.push(s.data[e].childProductTypeList[l].productTypeId)}c.testList[1].children.push(n)}}console.log(t(c.SsearchData," at pages\\salesanalysis\\salesanalysis.vue:300")),console.log(t(c.searchvalue," at pages\\salesanalysis\\salesanalysis.vue:301")),setTimeout(function(){a.list=c.testList},300)})},unique:function(a){var s=new Map;return a.filter(function(a){return!s.has(a.id)&&s.set(a.id,1)})},change:function(a){var s=this,e=a.choiceDate,n=a.dayCount;this.systemDate="",this.systemDate1="",console.log(t(e,n," at pages\\salesanalysis\\salesanalysis.vue:322")),console.log(t("入住从 "+e[0].re+"  到 "+e[1].re+"  共 "+n+" 晚"," at pages\\salesanalysis\\salesanalysis.vue:323")),this.systemDate=e[0].date.substring(0,4)+"-"+e[0].date.substring(4,6)+"-"+e[0].date.substring(6,8),this.systemDate1=e[1].date.substring(0,4)+"-"+e[1].date.substring(4,6)+"-"+e[1].date.substring(6,8),console.log(t(this.systemDate," at pages\\salesanalysis\\salesanalysis.vue:326")),console.log(t(this.systemDate1," at pages\\salesanalysis\\salesanalysis.vue:327")),console.log(t(c.SsearchData1.join(",")," at pages\\salesanalysis\\salesanalysis.vue:328")),console.log(t(c.searchvalues.join(",")," at pages\\salesanalysis\\salesanalysis.vue:329")),(0,r.FlipInstantaneousLoadingSalesData)({"access-token":this.userToken,beginDate:this.systemDate,endDate:this.systemDate1,buyerOrgIdList:c.SsearchData1.join(","),productTypeIdList:c.searchvalues.join(",")}).then(function(a){console.log(t(a.data," at pages\\salesanalysis\\salesanalysis.vue:335")),console.log(t(s.systemDate," at pages\\salesanalysis\\salesanalysis.vue:336")),console.log(t(s.systemDate1," at pages\\salesanalysis\\salesanalysis.vue:337")),c.res1=[],s.total=[],s.total.push(a.data.length),console.log(t(s.total[0]," at pages\\salesanalysis\\salesanalysis.vue:341")),s.productPage();var e=s.splitarray(a.data,5);if(console.log(t(e," at pages\\salesanalysis\\salesanalysis.vue:344")),a.data.length<5)c.res1=a.data;else for(var n=0;n<a.data.length;n++)n<5&&c.res1.push(a.data[n]);console.log(t(c.res1," at pages\\salesanalysis\\salesanalysis.vue:354"));for(var l={categories:[],series:[{name:"销售量",data:[]},{name:"毛利",data:[]}]},i=0;i<c.res1.length;i++)l.categories.push(c.res1[i].date.substring(8,10)),l.series[0].data.push(c.res1[i].totalSalesPrice),l.series[1].data.push(c.res1[i].grossProfitPrice);c.showColumn("canvasColumn",l)})},qy:function(a){var s=this;console.log(t(a," at pages\\salesanalysis\\salesanalysis.vue:372")),console.log(t(this.systemDate," at pages\\salesanalysis\\salesanalysis.vue:373")),console.log(t(this.systemDate1," at pages\\salesanalysis\\salesanalysis.vue:374")),(0,r.CustomerDataChangeDataAnalysis)({"access-token":this.userToken,beginDate:this.systemDate,endDate:this.systemDate1,buyerOrgIdList:c.SsearchData1.join(","),productTypeIdList:c.searchvalues.join(",")}).then(function(e){console.log(t(e.data," at pages\\salesanalysis\\salesanalysis.vue:380")),c.res1=[],s.total=[],s.total.push(e.data.length),console.log(t(s.total[0]," at pages\\salesanalysis\\salesanalysis.vue:384"));var n=s.splitarray(e.data,5);console.log(t(n," at pages\\salesanalysis\\salesanalysis.vue:386")),c.res1=n[a-1],console.log(t(c.res1," at pages\\salesanalysis\\salesanalysis.vue:388"));for(var l={categories:[],series:[{name:"销售量",data:[]},{name:"毛利",data:[]}]},i=0;i<c.res1.length;i++)l.categories.push(c.res1[i].date.substring(8,10)),l.series[0].data.push(c.res1[i].totalSalesPrice),l.series[1].data.push(c.res1[i].grossProfitPrice);c.showColumn("canvasColumn",l)});var e=this;e.current=a;var n=parseInt(e.total),l=parseInt(e.pageSize),i=parseInt(n/l);n/l>i&&i++;var o=[];if(!(i<5))return a>=i-2?(o=[i-4,i-3,i-2,i-1,i],e.page=o,void console.log(t(e.page+"2222222222222"," at pages\\salesanalysis\\salesanalysis.vue:418"))):i>5&&a<4?(o=[1,2,3,4,5],e.page=o,void console.log(t(e.page+"333333333333"," at pages\\salesanalysis\\salesanalysis.vue:424"))):i>5&&a>3?(o=[a-2,a-1,a,a+1,a+2],e.page=o,void console.log(t(e.page+"444444444444444444"," at pages\\salesanalysis\\salesanalysis.vue:430"))):void 0},treeConfirm:function(a){var s=this;console.log(t(a," at pages\\salesanalysis\\salesanalysis.vue:436")),c.searchvalues=[],c.SsearchData1=[],console.log(t(c.SsearchData," at pages\\salesanalysis\\salesanalysis.vue:439")),console.log(t(c.searchvalue," at pages\\salesanalysis\\salesanalysis.vue:440"));for(var e=0;e<c.searchvalue.length;e++)for(var n=0;n<a.length;n++)a[n].value==c.searchvalue[e]&&c.searchvalues.push(a[n].value);for(var l=0;l<c.SsearchData.length;l++)for(var i=0;i<a.length;i++)a[i].value==c.SsearchData[l]&&c.SsearchData1.push(a[i].value);c.res1=[],console.log(t(this.systemDate," at pages\\salesanalysis\\salesanalysis.vue:456")),console.log(t(this.systemDate1," at pages\\salesanalysis\\salesanalysis.vue:457")),console.log(t(c.SsearchData1.join(",")," at pages\\salesanalysis\\salesanalysis.vue:458")),console.log(t(c.searchvalues.join(",")," at pages\\salesanalysis\\salesanalysis.vue:459")),(0,r.CustomerDataChangeDataAnalysis)({"access-token":this.userToken,beginDate:this.systemDate,endDate:this.systemDate1,buyerOrgIdList:c.SsearchData1.join(","),productTypeIdList:c.searchvalues.join(",")}).then(function(a){console.log(t(a.data," at pages\\salesanalysis\\salesanalysis.vue:465")),c.res1=[],s.total=[],s.total.push(a.data.length),s.productPage();s.splitarray(a.data,5);if(a.data.length<5)c.res1=a.data;else for(var e=0;e<a.data.length;e++)e<5&&c.res1.push(a.data[e]);for(var n={categories:[],series:[{name:"销售量",data:[]},{name:"毛利",data:[]}]},l=0;l<c.res1.length;l++)n.categories.push(c.res1[l].date.substring(8,10)),n.series[0].data.push(c.res1[l].totalSalesPrice),n.series[1].data.push(c.res1[l].grossProfitPrice);c.showColumn("canvasColumn",n)})},treeCancel:function(a){console.log(t(a," at pages\\salesanalysis\\salesanalysis.vue:500"))},showTree:function(){this.$refs.tkitree._show()},splitarray:function(a,s){for(var e=a.length,t=[],n=0;n<e;n+=s)t.push(a.slice(n,n+s));return t}}};s.default=v}).call(this,e("6e42")["default"],e("0de9")["default"])},ed97:function(a,s,e){"use strict";e.r(s);var t=e("c864"),n=e.n(t);for(var l in t)"default"!==l&&function(a){e.d(s,a,function(){return t[a]})}(l);s["default"]=n.a}},[["87b3","common/runtime","common/vendor"]]]);